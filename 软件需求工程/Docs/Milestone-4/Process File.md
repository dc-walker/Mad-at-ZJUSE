# Process File

本组的 Process File 主要由以下三个方面构成：

## 一、设计

### 工具选定

在学期开始时，本组便通过小组会议确定了所使用的沟通工具与版本控制工具。

* 沟通工具：`微信`（工作组间的日常交流与线上会议均通过小组微信群进行）
* 版本控制工具：`Git `
* 文档提交格式：`MarkDown `（可以方便的通过 diff 命令查看版本之间的差异）
  文档汇总格式：`Word -> PDF` （由文档负责人将组员撰写的 md 文件进行汇总、排版，并最终生成 PDF 文件）
* 原型绘制工具：`Figma `（支持多人在线合作、批注，且能产生可交互的产品原型）

### TimeLine

在整个需求获取与代码开发过程中，我们一直定期开展目的与主题明确的小组会议（如 下表所示）

| 序号 |           会议内容前瞻            | 会议时间 |
| :--: | :-------------------------------: | :------: |
|  1   |            需求发布会             |  10.17   |
|  2   | 第一次头脑风暴会议 ：获取用户集合 |  10.24   |
|  3   |           需求获取访谈            |  10.28   |
|  4   | 第二次头脑风暴会议：用户角色建模  |  10.31   |
|  5   |           Use Case 总结           |   11.4   |
|  6   |        非功能性需求讨论会         |   11.7   |
|  7   |     构建低保真模型，细化需求      |  11.14   |
|  8   |      撰写软件需求规格说明书       |  11.21   |
|  9   |   构建高保真模型，讨论团队分工    |  11.28   |
|  10  |           编码进度汇报            |   12.5   |

## 二、沟通

### 需求发布会  

* 会议时间：2022年10月17日

* 会议内容：根据上午发布的需求与选定的待迭代项目总结得到“开源项目分析平台2.0”的用户需求

* 会议产出：《“开源项目分析平台2.0”用户需求（Ver1.0）》

  * 数据分析需求：

    （高优先级）

    * 展示项目的**贡献者活跃情况**

    * 展示项目的**社区发展速度**

    * 指出项目的**核心贡献者**

    * 对 `Pytorch` 项目的**公司信息**进行**可视化**

      设计的数据为：Stargazer & Committer & Issue

      参考实现为：https://ossinsight.io/analyze/pytorch/pytorch

      ![company](.\img\company.png)

    * 对**设计相关的讨论信息**进行**筛选**和**收集**：
    对 560 weeks 内、总数大于30,000个的 Pull Request 的时间、开发者名称及其角色信息进行收集。
  
    （中优先级）
  
    * 对项目 issue 进行分析：
      将 issue 按照更新时间在时间轴上可视化排列；
      对 issue 中的关键字进行提取与热度分析
  
    （低优先级）
  
    * 使用基于 [InFusion 定义的 Code Smell](http://www.intooitus.com/inFusion.html) 衡量代码设计质量
    * 添加**自定义分析数据**功能

  * 数据展示需求：

    （高优先级）

    * 支持**横向比较多个项目**
  
    （低优先级)
  
    * 支持图表**时间范围选择**
    * 支持图表**缩放**
    * 支持图表**排序**
  
  * 数据获取需求：
  
    （高优先级）
  
    * 支持**数据源缓存**
    * 细化数据过滤，对可能缺失的数据进行特殊处理
    * 优化 GitHub 获取方式，在接口不可用时**提供历史数据访问**
  
  * 用户系统需求：
  
    （低优先级）
  
    * 实现**用户权限控制**
    * **提高账号安全性**：实现弱密码限制 / 验证码登录 / 令牌登录 / 登陆设备管理
    * 增加对最后登陆时间、访问次数等用户信息的记录
  
  * 非功能性需求：
  
    （高优先级）
  
    * 较快的加载速度
    * 支持并发访问
  
  * 项目重构需求：
  
    （高优先级）
  
    * 友好的用户界面
    * 完备的代码注释
    * 详尽的 README 文档
  
  * 项目相关：
  
    （高优先级）
  
    * 重构“开源项目分析平台1.0”版本的前端设计与页面跳转关系
    * 重新设计数据库
    * 迭代为**前后端分离**项目
    * 完善通过文本搜索，从 GitHub 、Gitee 等多个托管平台添加监视项目的功能

### 第一次头脑风暴会议 ：获取用户集合

* 会议时间：2022年10月24日

* 会议主题：开源项目分析平台的用户集合

* 会议背景：我们已经初步从需求发布会中选择了开源项目分析平台，并仔细阅读了上一届的代码和内容。我们希望通过头脑风暴会议获取到相关的用户集合，为下周的需求获取访谈会议做好准备。

* 会议要求：

  - 参与者的思考没有任何约束，有任何想法请“大声说出”

  - 会议过程中不对他人的想法进行评价，可以进一步讨论和挖掘

  - 每个人都分发一张空白的图纸，用于记录思维导图。

  - 讨论结束后，统一对所有观点进行评价。开始对所有想法进行归纳和删减。

  - 归纳和删减中遇到分歧，统一以投票的方式进行决策。

  - 会议结束后收集思维导图进行总结。


* 会前准备：

  - 提前在32舍楼下的小圆桌处占座

  - 组长寻找一些同类的网站，讨论前自行浏览


* 会议时长：约30min

* 会议记录：
  - 本次会议我们主要得出了用户集合若干，以下为随机抽取的一部分
    - 对计算机专业比较熟悉的人群
    - 对 GitHub 不太了解的其他专业的人群
    - repo的开发人员
    - 管理层人员
    - 软件测试人员
    - 软件需求工程师
    - 对自己仓库的数据感兴趣的 GitHub 仓库拥有者
    - 科研人员
    - 领导
    - 项目监督者
    - 闲逛的网上冲浪者
    - 其他

### 需求获取访谈 

* 会议时间：2022年10月28日

* 会议内容：对上午进行的需求获取会访谈结果进行回顾，对于10月17号总结的用户需求进行迭代。

* 会议成果：基于访谈成果与开发成本重新对各需求的优先级进行了划分，并按照功能模块进行分类。

  * 监视项目：优先实现对 `PyTorch` 项目的数据分析与可视化。

  * 功能需求

    * 数据处理：

      （高优先级）

      * **支持**数据源**缓存在服务器**
        不是实时爬的，不需要定期自动更新
      * **需要时间戳**以表明数据最后更新时间

    * 数据展示：

      （高优先级）

      * 支持**横向比较两个项目**：优先实现 `PyTorch` 与 `TensorFlow` 的横向比较

      （中优先级）

      * 支持图表**缩放**
      * 支持图表**排序**

      （低优先级)

      * 支持**横向比较多个项目**

      * 支持图表**时间范围选择**

    * 数据分析需求：

      （高优先级）

      * 对项目 issue 的 **open - close 跨度** & **单位时间内解决数量** 进行可视化呈现
      * 通过以下两个维度展示项目的**社区发展速度**

      * 1. commit & pull request & issue 总量统计
        2. 社区成员数量变化（可以区分 pull / issue / commit）

      * 对 `Pytorch` 项目的**公司信息**进行**可视化**

        设计的数据为：Stargazer & Committer & Issue

        参考实现为：https://ossinsight.io/analyze/pytorch/pytorch

        ![company](.\img\company.png)

      （中优先级）

      * 指出项目的**核心贡献者**（提交数为前 20% 的贡献者)

      * 对**设计相关的讨论信息**进行**筛选**和**收集**：
        首先从 pull request 中筛选出设计相关的话题，进而对其进行**词频统计**，最终通过**词云方式呈现**

      （低优先级）

      * 使用基于 [InFusion 定义的 Code Smell](http://www.intooitus.com/inFusion.html) 衡量代码设计质量
      * 添加**自定义分析数据**功能

    * 用户系统：

      （中优先级）

      * 登录用户 -     **有权添加监控项目**                     有权**发出同步最新数据的请求**
      * 未登录用户 - 有**权查看**已存在的监控项目     有权**发出同步最新数据的请求**

      （低优先级）

      * **提高账号安全性**：实现弱密码限制 / 验证码登录 / 令牌登录 / 登陆设备管理

  * 非功能需求

    * 观感需求：**低饱和度**的配色方案，以白色等**浅色系作为主题色**

    * 执行需求：

      （高优先级）

      * 较快的加载速度
      * 较低的并发需求

### 第二次头脑风暴会议：用户角色建模

* 会议时间：2022年10月31日

* 会议主题：开源项目分析平台的用户角色建模

* 会议背景：

  通过需求获取访谈会议，我们了解到了用户的真实需求，在此基础上，结合我们之前获取的用户角色集合，我们将进行用户角色建模。

* 会议要求：

  - 会议主要分为三个阶段

   - 整理用户角色集合

  - 整合用户角色

   - 提炼用户角色

   - 整理用户角色集合阶段，我们将进行讨论，把用户角色集合中有部分重叠的角色归纳在一起。

  - 整合和提炼用户角色阶段，我们将针对需求获取访谈会的内容，将用户角色进行提炼


* 会前准备：

  * 提前在32舍楼下的小圆桌处占座

  * 组员认真阅读需求获取访谈会的总结，并查阅相关资料

* 会议时长：约30min

* 会议记录：

  - 整合初始用户角色集合阶段，我们主要讨论得出了以下比较容易重叠的方面
    - 使用本网站的目的
    - 对网站内容的需求
    - 用户身份和知识水平
    - 使用本网站的频率

  - 在此基础上，我们完成了整合用户角色的任务，并通过提炼用户角色主要得出了以下用户
    - 对某个仓库的发展和数据有准确需求，并且有一定的技术水平，会定期会查看更新的的人
      - 需要对比多个仓库的内容得出结论的，并且本身对该仓库所使用的技术不太了解的人
      - 对仓库的某些数据有特定需求，具有该项目的一定开发能力，并且需要随时查看更新的人
  
  * 对产品涉及的实体及数据传递路径进行分析后，形成了产品的上下文图：
  
    ![](.\img\Context Diagram.png)

### Use Case 总结

* 会议时间：2022年11月4日

* 会议内容：对所有提出的用例进行归类与描述，并朝着编码实现的方向进行转化。

* 会议记录：

  + 用例分类

    + 根据在前一部分提出的三种用户类型，我们分别给出了相应的用例，因此用例也可以总体分为三类：
      1. 项目添加与数据查看的用例
      2. 不同项目的对比用例
      3. 数据筛选与处理的用例
    + 各个同学根据用例的分类，分别提出了诸多用例
      + 项目添加与数据查看：
        用户检索项目，用户添加监视项目，用户查看项目数据，用户查看项目图表
      + 项目对比：用户横向对比项目
      + 数据筛选与处理：用户按时间筛选项目，用户对数据排序

  + 用例描述方法

    + 结合课堂知识，我们决定采用规范的use case描述、use case图、sequence图来描述各个用例。
  
    + 对于用例的具体描述，我们重点关注了基本流、备选流等内容，意在明确用例的执行过程，这也与我们的实现工作最为相关。
  
      最终形成了整个产品的 Use Case Diagram：
  
      ![](.\img\Use Case Diagram.png)
  
  + 用例转化为实现计划
  
    + 为了能把用例转化为项目功能，我们在用例与功能之间建立起映射关系，也就是Feature Tree。
  
      <img src=".\img\feature_tree.png" style="zoom:67%;" />
  
    + 为了能把用例实现转化为实现计划，我们把功能转化为了我们的开发时间线，也就是Feature Roadmap。
  
      <img src=".\img\road_map.png" style="zoom:67%;" />

### 非功能性需求讨论会

* 会议时间：2022年11月7日

* 会议背景：在建立起用户模型之后，我们针对用户的功能性活动，来进一步讨论这些使用场景的非功能性需求。根据开源项目分析平台的特点，我们完整讨论了以下需求：

  - 易用性、性能、观感、操作和环境需求、可维护性、安全性

  经过基于用户模型的讨论，我们重点关注了以下几个非功能性需求：

  - 易用性、可维护性、观感

* 会议记录：

  - 易用性

    - 易见：开源项目分析平台要能够让新用户一进入页面就能开始初步查看数据，能够第一时间让用户明白我们项目能展示什么数据，能怎样展示。同时，每一个数据分析的下方我们都提供了数据分析的简单结论。方便用户直接查看。
    - 易用：导航栏应该尽可能的简洁。经过讨论，我们只保留三个部分。分别是用户登录、数据分析和仓库管理

    - 易操作：我们的每个数据模块都为用户提供了数据筛选功能，用户简单上手之后就能熟练操作。

  - 可维护性

    - 我们的后端数据强调真实有效，需要大量的时间进行完整的爬取，因此我们会定期做好数据的爬取和本地保存的工作。
    - 我们的前端基于 Vue 进行开发，组件与组件之间的 CSS 样式、JS函数等均隔离开来，代码耦合性低，复用性较高。
    - 在编写的全过程，我们都需要注重注释和命名规范，便于代码的理解和后期开发
    - 开发过程中随时小规模进行测试

  - 观感

    - 我们的前端的开发要经过低保真模型和高保真模型进行建模，其中高保真模型使用 Figma 进行专业设计，确保界面美观
    - 我们的数据分析主要使用 Echarts 进行，确保数据展示的美观
    - 整体风格低饱和，轻快简洁。

### 构建低保真模型，细化需求

- 会议时间：2022年11月14日

- 会议成果：

  ![](.\img\prototype.jpg)

### 撰写软件需求规格说明书

* 会议时间：2022年11月21日

* 会议背景：

  ​	经过前期的一系列工作，我们开始撰写需求规格说明书，并上交了第一版本。我们秉承着“没有绝对完美的SRS”的理念，在完成SRS之后还进行了一次线上的SRS内容答疑讨论会，主要内容是针对SRS中一些没有理解的地方向撰写者进行提问，并对一些不足之处进行讨论和补充。

* 会议记录：

  * 《软件规格说明书》
  * SRS 内容答疑讨论

### 构建高保真模型，讨论团队分工

* 会议时间：2022年11月28日

* 会议内容：完成产品高保真原型，明确编码工作的具体分工

* 会议记录：

  * 高保真模型构建

    * 工具选定 - `Figma`

      ​	我们使用 `Figma` 作为设计工具来构建高保真模型，完成了用户接口的原型设计，为前端代码设计提供了非常有益的指导意义，显著提高了前端代码工作的效率。

      ![overview](C:\Users\HUAWEI\Desktop\README\img\overview.png)

      <center>Figma设计工具内高保真模型的截图</center>

    * 模型构建与需求回扣

      ​       在构建高保真模型的过程中，我们遵循并回扣了需求分析时提出的各项需求。

      ​		首先，数据分析是用例的关键点，因此我们<u>抓住了核心的数据可视化功能进行重点设计</u>。我们对图表的形式进行了筛选，选取了比较合适的图表形式用于数据呈现，如 `pull request history` 的折线图、`commit` 的热力图、`issue first responded time` 的盒须图等（由于 `Figma` 并不支持图表的快速绘制，因此我们以 `comments` 的形式写在了高保真模型的相应位置）。我们也对图表的配色和样式进行了设计，让图表既能够显眼，也能融入整体项目的风格。我们还将数据筛选功能与数据呈现功能结合起来，让时间筛选拖拽条与图表一同呈现。

      ​		其次，为了改善前一版本中开源项目基本数据的呈现，我们<u>对表格的样式进行了优化</u>，表格更加清晰且美观。

      ​		再次，为了更好满足需求分析中用户对于开源项目数据的分析需求，我们<u>以 `card` 的形式在每个图表下显示了主要贡献者、主要贡献时间等结论，供用户参考</u>。`card` 能以结论性的方式呈现社区的发展状况；`card` 也能减少用户的分析压力；另外，一对 `card` 分别为两个项目的分析结论，便于用户进行对比。

      ​		另外，界面设计作为最重要的用户接口，必须满足美观、清晰的非功能需求，这是老师在项目要求里提出的需求，也是在需求分析里得出的具有高优先级的非功能需求。界面设计的配色为相对明亮的蓝紫色调，使得图表显眼突出，服务于可视化功能，这样用户的注意力能更好放在数据呈现上；设计风格为扁平化简约风格，清晰简洁，同时又不失科技风。值得一提的是，我们的界面设计原先是走深色路线的，而在<u>需求获取会上老师提出了低饱和度配色的需求，因此我们对界面需求重新进行整理，对配色方案进行了相应修改，以更好满足用户需求</u>。

    * 建模与编码工作的衔接

      ​		为了让高保真模型能高效地转化为编码成果，我们采用了多种方法。

      ​		第一，充分利用 `Figma` 提供的样式代码。`Figma` 能够为每一个元素提供出 CSS 样式代码，因此编码的同学可以快速确定元素的样式，减少调整样式的时间。

      ​		第二，模型设计的同学在 `Figma` 内给出足够的 `comments` ，帮助编码同学理解。

      ​      <img src="C:\Users\HUAWEI\Desktop\README\img\icons.png" alt="icons" style="zoom:33%;" />

      ​		第三，把模型构建中用到的素材单独陈列，便于编码同学快速获取。

  * 团队分工

### 编码进度汇报

- 会议时间：2022年12月5日

- 会议时间：2022年12月5日

- 会议内容：对截止目前的前后端与数据爬取 工作流程 & 进度 进行汇总。

- 会议记录：

  | 编码阶段 | 前端进度                                                     | 后端进度                                                     | 数据爬取进度                                                 |
  | :------: | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
  | 第一阶段 | 选择技术路线，进行技术学习。<br />经过讨论，我们认为 Vue能够较好的满足我们对可维护性和观感的需求，同时上手比较容易，适合目前的开发周期。 | 技术选型：<br />选择 Django 作为后端框架，选择 MySQL 数据库，使用 Celery 库进行任务队列管理。 | 数据源选择：<br />选择 GH Archive 作为 GitHub 事件数据的数据源。 |
  | 第二阶段 | HTML的编写和CSS样式编写。基于高保真模型提供的 Figma 上的网页设计图，完成了HTML和CSS的编写。 | 数据表设计：<br />设计 GitHub 事件数据的 Schema。            | 数据获取工具实现：<br />实现数据（事件数据）下载、解压、事件数据提取和转化函数。 |
  | 第三阶段 | 实现交互逻辑的JS代码。基于SRS中的用户场景，我们书写了JS代码来完成相关的用户逻辑。 | API 实现：<br />实现部分 API，这些 API 提供的数据能够通过 GitHub 事件数据获得。 | 数据获取工具改造：<br />针对由于数据量过大导致无法在内存中进行所有操作的问题，改造数据获取工具使之包含文件 IO 相关函数。<br />系统优化：<br />引入流水线设计，使数据下载与数据解压、时间数据提取和转化能够同时进行，大大加快数据获取速度。 |
  | 第四阶段 | 实现数据展示部分的JS代码。                                   | 数据表设计：<br />设计缓存数据的 Schema。<br /> 数据获取工具实现：<br />实现数据（缓存相关数据）提取和转化函数。 | 添加数据源：添加 GitHub API 作为数据源 。<br />技术选项：选择 PyGitHub 库辅助数据爬取。 |
  | 第五阶段 | 完成前端的数据绑定和组件的整合。完成 Router 路由。           | 缓存机制改进：<br />使用分级缓存的思想改进缓存机制，减少 GitHub API 的访问次数。 <br />API 实现：实现部分 API，这些 API 提供的数据能够通过缓存数据获得。 | 数据获取工具改造：<br />针对由于 PyGitHub 获取数据效率低（其往往会发送一些冗余请求，浪费 GitHub API rate limit）的问题，将一部分原通过 PyGitHub 进行的 GitHub API 的访问改由自己实现的函数进行。 |
  | 第六阶段 | 整合全部的组件和代码，与后端进行连接测试。                   | 权限相关功能实现：<br />实现用户注册、登陆、登出、权限控制功能。 |                                                              |

## 三、产出

* 完备的小组会议记录与讨论记录

<img src=".\img\meeting.jpg" style="zoom:33%;" />

* 详尽的项目文档

  ![](.\img\m1.jpg)

  ![](.\img\m2.jpg)

  ![](.\img\srs.jpg)

* 需求迭代

  在进行编码工作前对于用户需求、功能需求与非功能需求进行多次迭代；
  在进行编码工作后不对需求进行增删，但视开发进度与实现难度对其优先级进行灵活调整。

  ![](.\img\state.jpg)

